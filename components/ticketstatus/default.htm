<style>
    .comment_label {
        font-size: 12px;
        font-weight: bold;
    }

</style>
{% if authorize_access %}
    <div id="ticket-status">
        <form data-request="onCredentialsCheck">
            {% if ask_number %}
                <label for="ticket_number">{{ 'Ticket number' }}</label>
                <input class="form-control" id="ticket_number" name="ticket_number" type="text"
                       placeholder="{{ 'Enter ticket number'|_ }}"/>
                <br/>
            {% endif %}
            <label for="email">{{ 'Your e-mail' }}</label>
            <input class="form-control" value="{{ ticket_email }}"
                   id="email" name="email" type="text"
                   placeholder="{{ 'Enter your e-mail'|_ }}"/>
            <br/>
            <label for="code">{{ 'Your code' }}</label>
            <input class="form-control" value="{{ ticket_code }}"
                   id="code" name="code" type="text"
                   placeholder="{{ 'Enter ticket code'|_ }}"/>
            <br/>
            <button type="submit" class="btn btn-primary">{{ 'Check ticket'|_ }}</button>
        </form>
        <a href="#">{{ 'Do not remember your code? Click here!'|_ }}</a>
    </div>
{% else %}
    <div id="ticket-details">
        <h3 class="text-center">{{ 'Ticket'|_ }} {{ ticket.hash_id }}</h3>
        <p class="comment_label"><a href="/ticketlist?email={{ user_email }}&code={{ user_code }}">{{ 'Go to ticket list'|_ }}</a></p>

        <h4>{{ 'Current Status'|_ }}: <b>{{ ticket.status|_ }}</b></h4>
        <h4>{{ 'Last Updated'|_ }}: <b>{{ ticket.updated_at }}</b></h4>

        <hr>
        <div class="panel panel-primary">
            <div class="panel-header">
                <h4 class="panel-heading">{{ ticket.topic }} <span
                            class="pull-right">{{ 'Category:'|_ }} {{ ticket.category.name|_ }}</span></h4>

            </div>
            <div class="panel-body">
                {{ ticket.content|raw }}
            </div>
            <!-- todo
            <div class="panel-footer">
                <div class="row">
                    <div class="col-sm-6">
                        {% for file in ticket.files %}
                        {% else %}
                            {{ 'No file was attached to this ticket'|_ }}
                        {% endfor %}
                    </div>
                    <div class="col-sm-6">
                        {{ 'Attach file'|_ }}
                        <form data-request="onFileUpload" enctype="multipart/form-data">
                            <input class="form-control" type="file" name="file" id="file" style="padding-bottom: 40px;"/>
                            <br />
                            <button type="submit" class="btn btn-primary">{{ 'Send'|_ }}</button>
                        </form>
                    </div>
                </div>
            </div>
            -->
        </div>
        <hr>
        <div class="panel panel-primary">
            <div class="panel-header">
                <h4 class="panel-heading">{{ 'Comments'|_ }}</h4>
            </div>
            <div class="panel-body">
                {% for comment in ticket.comments %}
                    <div class="">
                        <p class="comment_label">{{ 'Author'|_ }}: {{ comment.author }} <i
                                    class="pull-right">{{ comment.created_at }}</i></p>
                        {{ comment.content|raw }}
                    </div>
                    <hr>
                {% else %}
                    <p>{{ 'No comments yet'|_ }}</p>
                    <hr>
                {% endfor %}

                <h4>{{ 'Add Comment'|_ }}</h4>
                <form method="post" data-request="onAddComment"
                      data-request-update="'{{ __SELF__ }}::ticket_details': '#ticket-details'">
                    <input type="hidden" name="ticket_number" value="{{ ticket.hash_id }}"/>
                    <label for="comment_author">{{ 'Your name'|_ }}</label>
                    <input class="form-control" type="text" name="comment_author" id="comment_author"/>
                    <br/>
                    <label for="comment_content">{{ 'Your comment'|_ }}</label>
                    <textarea class="form-control" id="comment_content" name="comment_content"></textarea>
                    <br/>
                    <button type="submit" class="btn btn-primary">{{ 'Submit'|_ }}</button>
                </form>
            </div>
        </div>
    </div>
{% endif %}